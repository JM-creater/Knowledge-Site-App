@page "/viewtraininguser"
@inject HttpClient http
@inject IJSRuntime js
@inject NavigationManager navigate
@layout UserMainLayout

<link rel="preconnect" href="https://fonts.googleapis.com" />
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" />
<link rel="stylesheet" type="text/css" href="css/gentrainings-stylesheet.css" />
<link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300;400;500;600;700&display=swap" rel="stylesheet" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css" />
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
@* <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.8/dist/umd/popper.min.js" crossorigin="anonymous"></script> *@
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.min.js"></script>

<div class="container-full-pg-1">
      <!-- Training Description -->
      <div class="description-container">
        <h2
          style="font-weight: 700; align-self: flex-start; justify-self: normal"
        >
           Javascript
        </h2>
        <div class="list-container">
          <ul>
            <li>Basic Concepts</li>
            <ul>
              <li>Variables and Data Types</li>
              <li>Control Flow</li>
              <li>Functions and Scope</li>
              <li>Arrays and Objects</li>
            </ul>
          </ul>
          <ul>
            <li>Basic Concepts</li>
            <ul>
              <li>Variables and Data Types</li>
              <li>Control Flow</li>
              <li>Functions and Scope</li>
              <li>Arrays and Objects</li>
            </ul>
          </ul>
          <ul>
            <li>Basic Concepts</li>
            <ul>
              <li>Variables and Data Types</li>
              <li>Control Flow</li>
              <li>Functions and Scope</li>
              <li>Arrays and Objects</li>
            </ul>
          </ul>
          <ul>
            <li>Basic Concepts</li>
            <ul>
              <li>Variables and Data Types</li>
              <li>Control Flow</li>
              <li>Functions and Scope</li>
              <li>Arrays and Objects</li>
            </ul>
          </ul>
          <ul>
            <li>Basic Concepts</li>
            <ul>
              <li>Variables and Data Types</li>
              <li>Control Flow</li>
              <li>Functions and Scope</li>
              <li>Arrays and Objects</li>
            </ul>
          </ul>
          <ul>
            <li>Basic Concepts</li>
            <ul>
              <li>Variables and Data Types</li>
              <li>Control Flow</li>
              <li>Functions and Scope</li>
              <li>Arrays and Objects</li>
            </ul>
          </ul>
        </div>
        <div
          style="
            display: flex;
            column-gap: 10px;
            align-items: center;
            margin-top: 1em;
          "
        >
          <h6 style="font-weight: 700; margin: 0">Hosted by Jennie Kim</h6>
          <img
            src="https://www.bollywoodshaadis.com/img/article-20231131716324259562000.jpg"
            style="
              max-width: 2em;
              max-height: 2em;
              object-fit: cover;
              aspect-ratio: 1/1;
              border-radius: 50%;
            "
          />
        </div>
      </div>
      <!-- Training Image -->
      <div class="image-container">
        <img
          src="https://www.codecademy.com/resources/blog/wp-content/uploads/2022/12/what-is-javascript-used-for.png"
          style="
            width: 100%;
            height: 100%;
            object-fit: cover;
            border-radius: 0.5em;
          "
        />
      </div>
      <!-- Get Started Button -->
      <div class="button-container">
        <button class="btn btn-start" style="width: 100%">
          <h6 style="color: white; font-weight: 600">Get Started</h6>
          <i
            class="fa-solid fa-circle-right"
            style="color: #febe3e; font-size: 30px"
          ></i>
        </button>
      </div>
    </div>

@code {
    private Training[] train { get; set; } = Array.Empty<Training>();

    protected override async Task OnInitializedAsync()
    {
        var response = await SendAuthorizedRequest(HttpMethod.Get, "https://localhost:7095/api/Training");

        if (response.IsSuccessStatusCode)
        {
            train = await response.Content.ReadFromJsonAsync<Training[]>() ?? Array.Empty<Training>();
        }
    }

    private async Task<HttpResponseMessage> SendAuthorizedRequest(HttpMethod method, string url, HttpContent content = null)
    {
        var request = new HttpRequestMessage(method, url);
        request.Headers.Add("X-API-KEY", "KNOWLEDGESITEAPPAPI");

        if (content != null)
        {
            request.Content = content;
        }

        return await http.SendAsync(request);
    }
}
